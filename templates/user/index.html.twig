{% extends 'base.html.twig' %}

{% block title %}{{ 'title.myCart'|trans }} {{app.user.name}}{% endblock %}

{% block body %}
    {{form(update_form)}}

    <hr>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>{{ 'ID'|trans }}</th>
                <th>{{ 'user.purchaseDate'|trans }}</th>
                <th>{{ 'Price'|trans }}</th>
            </tr>
        </thead>
        <tbody>
          {% for cart in carts %}
            <tr>
                <td><a href="{{ path('details', {'id':cart.id}) }}">{{ cart.id }}</a></td>
                <td>{{cart.purchaseDate|date('Y-m-d')}}</td>
                {% set tot = 0 %}
                {% for product in cart.cartContents %}
                  {% set tot = tot + product.quantity * product.product.price %}
                {% endfor %}
                <td>{{tot}}â‚¬</td> 
            </tr>
          {% endfor %}
        </tbody>
      </table>
      
{% endblock %}
