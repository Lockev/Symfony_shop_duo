{% extends 'base.html.twig' %}

{% block title %}Mon panier{% endblock %}

{% block body %}

    {% if is_granted("IS_AUTHENTICATED_FULLY") %}
    
        {% if cartContents is not null %}
        {{ dump(cartContents) }}
            <table class="table">
              <thead class="thead-dark">
                <tr>
                  <th>{{ 'Name'|trans }}</th>
                  <th>{{ 'Description'|trans }}</th>
                  <th>{{ 'Quantity'|trans }}</th>
                  <th>{{ 'cart.price'|trans }}</th> 
                  <th>{{ 'Price'|trans }}</th>
                  <th>{{ 'Delete'|trans }}</th>
                </tr>
              </thead>
              <tbody>
                {% for cartContent in cartContents %}
                  <tr>
                    <td><a href="{{ path('one_product', {'id':cartContent.product.id}) }}">{{cartContent.product.name}}</a></td>
                    <td>{{cartContent.product.description}}</td>
                    <td>{{cartContent.quantity}}</td>
                    <td>{{cartContent.product.price * cartContent.quantity}}€</td>
                    <td>{{cartContent.product.price}}€</td> 
                    <td><a href="{{ path('delete_cart_item', {'id':cartContent.id}) }}"><button type="button" class="btn btn-danger">{{ 'cart.delete'|trans }}</button></a></td> 
                  </tr>
                {% endfor %}
                </tbody>
              </table>
        {% else %}
            <p>{{ 'cart.empty'|trans }}</p>
        {% endif %}
    {% else %}
        <p>Vous devez etre connecté</p>
        <a href="{{path("app_login")}}">Se connecter</a>
    {% endif %}
{% endblock %}
